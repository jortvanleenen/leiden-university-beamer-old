%% beamerouterthemelu.sty
%% Copyright 2023 J.P. van Leenen
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   https://www.latex-project.org/lppl.txt
% and version 1.3c or later is part of all distributions of LaTeX
% version 2008 or later.
%
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is J.P. van Leenen.

\mode<presentation>

\DeclareOptionBeamer{footer}{\def\beamer@lu@footer{#1}}
\ProcessOptionsBeamer

\def\beamer@lu@footernone{none}
\def\beamer@lu@footerempty{empty}
\def\beamer@lu@footerinformation{information}

\defbeamertemplate*{footline}{titlepage footline}{%
    \ifx\beamer@lu@footer\beamer@lu@footernone%
    \else% 
    \begin{columns}[onlytextwidth]
        \begin{column}{.9\paperwidth}
            \begin{beamercolorbox}[ht=3ex,dp=1.5ex,left]{section in head/foot}%
                \ifx\beamer@lu@footer\beamer@lu@footerempty%
                \else%
                \hspace*{.15\paperwidth}
                \iflanguage{dutch}
                {Universiteit Leiden. Bij ons leer je de wereld kennen}
                {Discover the world at Leiden University}
                \fi%
            \end{beamercolorbox}%
        \end{column}
        \begin{column}{.1\paperwidth}
            \begin{beamercolorbox}[ht=3ex,dp=1.5ex,center]{slidenumbering}%
                \insertframenumber{}
            \end{beamercolorbox}%
        \end{column}
    \end{columns}
    \fi%
}

\setbeamertemplate{footline}{
    \ifx\beamer@lu@footer\beamer@lu@footernone%
    \else% 
    \begin{columns}[onlytextwidth]
        \begin{column}{.9\paperwidth}
            \begin{beamercolorbox}[ht=3ex,dp=1.5ex,left]{section in head/foot}%
                \ifx\beamer@lu@footer\beamer@lu@footerempty%
                \else% 
                \hspace*{.05\paperwidth}
                \ifx\beamer@lu@footer\beamer@lu@footerinformation%
                \ifx\beamer@shortauthor\@empty
                \else
                \usebeamerfont{author in head/foot}\insertshortauthor~%
                \fi
                \ifx\beamer@shortinstitute\@empty
                \else
                (\insertshortinstitute)%
                \fi
                \ifx\beamer@shortauthor\@empty
                \ifx\beamer@shortinstitute\@empty
                \else
                \ ---\ %
                \fi
                \else
                \ ---\ %
                \fi
                \ifx\beamer@shorttitle\@empty
                \usebeamerfont{title in head/foot}\inserttitle
                \else
                \usebeamerfont{title in head/foot}\insertshorttitle
                \fi
                \else
                \iflanguage{dutch}
                {Universiteit Leiden. Bij ons leer je de wereld kennen}
                {Discover the world at Leiden University}
                \fi
                \fi%
            \end{beamercolorbox}%
        \end{column}
        \begin{column}{.1\paperwidth}
            \begin{beamercolorbox}[ht=3ex,dp=1.5ex,center]{slidenumbering}%
                \insertframenumber
            \end{beamercolorbox}%
        \end{column}
    \end{columns}
    \fi%
}

\setbeamertemplate{frametitle}{
    \@tempdima=\textwidth%
    \advance\@tempdima by\beamer@leftmargin%
    \advance\@tempdima by\beamer@rightmargin%
    \vspace{1ex}%
    \begin{beamercolorbox}[wd=\the\@tempdima, leftskip=\the\dimexpr\beamer@leftmargin-0.3cm\relax]{frametitle}
        \usebeamerfont{frametitle}
        \insertframetitle\strut \usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\ \insertframesubtitle\par%
    \end{beamercolorbox}
}

\mode<all>
